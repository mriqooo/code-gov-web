<div class="search-results-content">
  <div class="banner" [style.background-image]="bannerImage">
    <div class="banner-content">
      <div class="banner-title">Search Results</div>
    </div>
  </div>
  <div class="indented">
    <ul class="breadcrumbs">
      <li><a routerLink="/">Home</a></li>
      <li>Search Results</li>
    </ul>
  </div>
  <div class="search-results-header">
    <div class="indented">
      <div class="width-quarter">
        <repos-search autofocus=true buttonClasses="alt" placeholder="{{ queryValue }}"></repos-search>
      </div>
      <h3 *ngIf="total" class="repos-count width-three-quarters">
        We found {{ total }} {{ "Repositories" | pluralize : reposTotal }} for "{{ queryValue }}"
      </h3>
    </div>
  </div>
  <div class="indented">
    <div id="filter-boxes-section">
      <h2 *ngIf="!isMobile">Filter</h2>
      <div style="display: inline; width: 100%">
        <button *ngIf="isMobile" style="width: 100%" (click)="onShowFilter()">
          Filter
        </button>
      </div>
      <div id="sideNavBar" [style.width]="sideNavBarWidth" class="sidenav">
        <div class="sidenav-padding">
          <div style="display: flex; justify-content: right;">
            <a class="close-search-box-button" (click)="onCloseNavBar()">
              <i class="icon icon-cancel"></i>
            </a>
          </div>
          <div>
            <filter-box
              [style.display]="languages && languages.length > 1 ? 'block' : 'none'"
              title="Language"
              [attr.options]="languages | json"
              (change)="onFilterBoxChange($event)"
            ></filter-box>

            <!--
            <filter-box
              title="Organization Type"
              options='[{"name":"Federal Government","value":"federal"},{"name":"State Government","value":"state"},{"name":"Local Government","value":"local"}]'
              (change)="onFilterBoxChange($event)"
            ></filter-box>
            -->
            <filter-box
              [style.display]="agencies && agencies.length > 1 ? 'block' : 'none'"
              title="Federal Agency"
              [attr.options]="agencies | json"
              (change)="onFilterBoxChange($event)"
            ></filter-box>

            <filter-box
              [style.display]="licenses && licenses.length > 1 ? 'block' : 'none'"
              title="License"
              [attr.options]="licenses | json"
              (change)="onFilterBoxChange($event)"
            ></filter-box>

            <filter-box
              title="Usage Type"
              options='[{"name":"Open Source","value":"openSource"},{"name":"Government-Wide Reuse","value":"governmentWideReuse"}]'
              (change)="onFilterBoxChange($event)"
            ></filter-box>
          </div>
        </div>
      </div>
      <div *ngIf="!isMobile">
        <filter-box
          [style.display]="languages && languages.length > 1 ? 'block' : 'none'"
          title="Language"
          [attr.options]="languages | json"
          (change)="onFilterBoxChange($event)"
        ></filter-box>

        <!--
        <filter-box
          title="Organization Type"
          options='[{"name":"Federal Government","value":"federal"},{"name":"State Government","value":"state"},{"name":"Local Government","value":"local"}]'
          (change)="onFilterBoxChange($event)"
        ></filter-box>
        -->
        <filter-box
          [style.display]="agencies && agencies.length > 1 ? 'block' : 'none'"
          title="Federal Agency"
          [attr.options]="agencies | json"
          (change)="onFilterBoxChange($event)"
        ></filter-box>

        <filter-box
          [style.display]="licenses && licenses.length > 1 ? 'block' : 'none'"
          title="License"
          [attr.options]="licenses | json"
          (change)="onFilterBoxChange($event)"
        ></filter-box>

        <filter-box
          title="Usage Type"
          options='[{"name":"Open Source","value":"openSource"},{"name":"Government-Wide Reuse","value":"governmentWideReuse"}]'
          (change)="onFilterBoxChange($event)"
        ></filter-box>
      </div>
    </div>
    <div id="filter-results-section">
      <div class="sort-section">
        <h2>
          <span>Sort by</span>
          <select [(ngModel)]="selectedSortOption" (change)="onSortSelectionChange($event)">
            <option *ngFor="let sortOption of sortOptions" [ngValue]="sortOption">{{sortOption}}</option>
          </select>
        </h2>
      </div>
      <div class="filter-tags">
        <div class="filter-tag" *ngFor="let filterTag of filterTags" (click)="removeFilterTag(filterTag)">
          <div class="filter-tag-title">{{filterTag.name}}</div>
        </div>
      </div>
      <repo-list [queryValue]="queryValue" [results]="finalResults" [pageSize]="pageSize"></repo-list>
    </div>
  </div>
</div>
